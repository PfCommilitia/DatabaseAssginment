## 所用技术

数据库：PostgreSQL

后端：Node.js

前端：React

以下内容可能变化；时间有限，可能不能完成以下所有功能。

数据结构

**主键**，非空值，*可以为空的值*，***外码***。

### 用户表

- **用户名**（学工号）
- 姓名
- 是否活动
- 是否初始化
- 密码哈希值
- *头像URL*
- ***组织***

### 组织表

- **组织id**
- 组织名称
- 是否活动
- ***负责人***
- 上级组织

### 社团表

- **社团id**
- 社团名称
- ***社团所属组织***
- 是否活动
- ***负责人***
- *图片URL*
- *描述*

### 社团成员记录表

- ***用户***
- ***社团***
- 是否有效

### 社团申请表

- **申请id**
- ***申请者***
- ***申请社团***
- 描述
- 是否有效
- 时间戳

### 社团申请结果表

- ***申请id***
- ***审核者***
- 结果
- *描述*
- 时间戳

### 场所表

- **场所id**
- 场所名称
- 场所地址
- *场所描述*
- 是否可用
- ***所属组织***
- 容量
- *图片URL*

### 活动申请表

- **申请id**
- ***申请者***
- ***社团***
- ***场所***
- 时间范围
- 是否有效
- 主题
- 描述
- 容量

### 活动申请结果表

- ***申请id***
- ***审核人***
- 结果
- *描述*
- 时间戳

### 活动参与申请表

- **申请id**
- ***申请人***
- ***申请活动***
- 是否有效
- 时间戳

### 活动参与申请结果表

- ***申请id***
- ***审核人***
- 结果
- *描述*
- 时间戳

### 站内信息表

- **信息id**
- ***发送者***
- ***收信者***
- 主题
- 内容
- ***回复对象***
- 时间戳
- 是否已读
- *附件URL*

## 优化方向

可能需要权衡一下是否合并申请表和结果表，现在的考虑是合并后的表有一堆可为空的字段，可能不好管理。

## 用户页面

查看个人信息

未初始化用户分配默认密码，登录时要求修改

修改密码

更换头像，上传到对象存储

查看社团列表

## 控制台

所有筛选和排序条件均为可选项，支持多于一条筛选依据，筛选条件之间AND关系，筛选条件内部OR关系

所谓“上级组织筛选”，给定一组上级组织，只要求所属组织的任意一级上级组织在这组组织中

### 用户管理

1（管理员）创建用户，支持批量导入

1（管理员）修改用户组织

1（管理员）修改用户信息

1（管理员）查看所有用户，能够条件筛选

1（管理员）停用用户

（组织负责人）在下级组织间修改组织

（组织负责人）查看负责的所有组织和下级组织的所有用户，组织、上级组织、社团条件筛选

（社团负责人）查看负责的所有社团的所有用户，组织、上级组织、社团条件筛选

### 组织管理

1（管理员）创建组织，修改组织信息

1（管理员）指定组织负责人

1（管理员）停用组织

1（管理员）查看所有组织，上级组织条件筛选，人数排序

（组织负责人）创建下级组织

（组织负责人）转让组织

（组织负责人）停用下级组织

1（组织负责人）查看负责的所有组织和下级组织，上级组织条件筛选，人数排序

### 社团管理

1（管理员）迁移社团

1（管理员、组织负责人）创建社团，修改社团信息

1（管理员、组织负责人）停用社团

1（管理员、组织负责人）指定社团负责人

1（社团负责人）修改社团信息

（社团负责人）转让社团

1（管理员、组织负责人、社团负责人）管理社团成员

1（管理员、组织负责人、社团负责人）查看管理社团列表，组织、上级组织条件筛选，人数排序

### 社团申请

（普通用户）查看社团申请，提交社团申请

（社团负责人）查看社团申请，审核社团申请

以上，社团、社团组织、社团上级组织、用户组织、用户上级组织条件筛选

### 场所管理

（管理员）转移场所

1（管理员、组织负责人）创建场所、修改场所信息

1（管理员、组织负责人）设置场所不可用

以上，组织、上级组织条件筛选

### 活动管理

1（管理员、组织负责人、社团负责人）查看自己活动申请，提交活动申请，撤销活动参与申请

1（管理员、组织负责人）查看管理范围内

1（管理员、组织负责人）审核活动申请

以上三项，社团、社团组织、社团上级组织筛选

### 活动参与申请

（普通用户）查看自己活动参与申请，提交活动参与申请，撤销活动参与申请

（管理员、组织负责人）为所属用户创建并通过活动参与申请

（管理员、组织负责人、社团负责人）查看活动参与申请，审核活动参与申请

以上，社团、社团组织、社团上级组织、用户组织、用户上级组织筛选，活动剩余人数排序